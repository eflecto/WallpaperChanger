<Window x:Class="WallpaperChanger.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ð¡Ð¼ÐµÐ½Ð° ÐžÐ±Ð¾ÐµÐ² Ð¸ Ð­ÐºÑ€Ð°Ð½Ð° Ð‘Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸" Height="650" Width="900"
        WindowStartupLocation="CenterScreen" ResizeMode="CanResize">
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Background" Value="#0078D4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#005A9E"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        
        <Style TargetType="GroupBox">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="BorderBrush" Value="#CCCCCC"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
        
        <Style TargetType="TextBlock">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>
    </Window.Resources>

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#0078D4" CornerRadius="5" Padding="15" Margin="0,0,0,10">
            <StackPanel>
                <TextBlock Text="ðŸ–¼ï¸ Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐžÐ±Ð¾ÑÐ¼Ð¸ Windows 11" 
                          FontSize="20" FontWeight="Bold" 
                          Foreground="White"/>
                <TextBlock x:Name="StatusText" Text="Ð“Ð¾Ñ‚Ð¾Ð²Ð¾ Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ" 
                          FontSize="12" Foreground="#E0E0E0" Margin="0,5,0,0"/>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Folder Selection -->
                <GroupBox Header="ðŸ“ Ð’Ñ‹Ð±Ð¾Ñ€ Ð¿Ð°Ð¿ÐºÐ¸ Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼Ð¸">
                    <StackPanel>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="FolderPathTextBox" 
                                    Grid.Column="0" 
                                    Padding="8" 
                                    Margin="5"
                                    IsReadOnly="True"/>
                            <Button x:Name="BrowseFolderButton" 
                                   Grid.Column="1" 
                                   Content="ÐžÐ±Ð·Ð¾Ñ€..."
                                   Click="BrowseFolderButton_Click"/>
                        </Grid>
                        <TextBlock x:Name="ImageCountText" 
                                  Text="Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹ Ð½Ðµ Ð²Ñ‹Ð±Ñ€Ð°Ð½Ð¾" 
                                  FontStyle="Italic" 
                                  Foreground="Gray"/>
                    </StackPanel>
                </GroupBox>

                <!-- Desktop Wallpaper Settings -->
                <GroupBox Header="ðŸ–¥ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¾Ð±Ð¾ÐµÐ² Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ ÑÑ‚Ð¾Ð»Ð°">
                    <StackPanel>
                        <CheckBox x:Name="EnableDesktopChange" 
                                 Content="Ð’ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÑƒÑŽ ÑÐ¼ÐµÐ½Ñƒ Ð¾Ð±Ð¾ÐµÐ²"
                                 Margin="5"
                                 Checked="EnableDesktopChange_Checked"
                                 Unchecked="EnableDesktopChange_Unchecked"/>
                        
                        <TextBlock Text="Ð§Ð°ÑÑ‚Ð¾Ñ‚Ð° ÑÐ¼ÐµÐ½Ñ‹:" FontWeight="Bold" Margin="5,10,5,5"/>
                        
                        <ComboBox x:Name="FrequencyTypeCombo" 
                                 Margin="5"
                                 SelectionChanged="FrequencyTypeCombo_SelectionChanged">
                            <ComboBoxItem Content="Ð¡ÐµÐºÑƒÐ½Ð´Ñ‹" IsSelected="True"/>
                            <ComboBoxItem Content="ÐœÐ¸Ð½ÑƒÑ‚Ñ‹"/>
                            <ComboBoxItem Content="Ð§Ð°ÑÑ‹"/>
                            <ComboBoxItem Content="Ð”Ð½Ð¸"/>
                            <ComboBoxItem Content="ÐÐµÐ´ÐµÐ»Ð¸"/>
                            <ComboBoxItem Content="ÐœÐµÑÑÑ†Ñ‹"/>
                            <ComboBoxItem Content="Ð’ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ"/>
                        </ComboBox>

                        <StackPanel x:Name="IntervalPanel" Margin="5">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0" Text="Ð˜Ð½Ñ‚ÐµÑ€Ð²Ð°Ð»:" VerticalAlignment="Center"/>
                                <Slider x:Name="IntervalSlider" 
                                       Grid.Column="1"
                                       Minimum="1" 
                                       Maximum="60" 
                                       Value="5"
                                       TickFrequency="1"
                                       IsSnapToTickEnabled="True"
                                       Margin="10,0"
                                       ValueChanged="IntervalSlider_ValueChanged"/>
                                <TextBlock x:Name="IntervalValueText" 
                                          Grid.Column="2" 
                                          Text="5" 
                                          MinWidth="40"/>
                            </Grid>
                        </StackPanel>

                        <StackPanel x:Name="SpecificTimePanel" Visibility="Collapsed" Margin="5">
                            <TextBlock Text="Ð’Ñ€ÐµÐ¼Ñ ÑÐ¼ÐµÐ½Ñ‹ (Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚: Ñ‡Ñ‡:Ð¼Ð¼, Ð¼Ð¾Ð¶Ð½Ð¾ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ñ‡ÐµÑ€ÐµÐ· Ñ‚Ð¾Ñ‡ÐºÑƒ Ñ Ð·Ð°Ð¿ÑÑ‚Ð¾Ð¹):" Margin="0,0,0,5"/>
                            <TextBox x:Name="SpecificTimesTextBox" 
                                    Padding="8"
                                    Text="09:00;13:00;18:00"
                                    ToolTip="ÐŸÑ€Ð¸Ð¼ÐµÑ€: 09:00;13:00;18:00"/>
                        </StackPanel>

                        <CheckBox x:Name="ShuffleCheckBox" 
                                 Content="Ð¡Ð»ÑƒÑ‡Ð°Ð¹Ð½Ñ‹Ð¹ Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº" 
                                 IsChecked="True"
                                 Margin="5,10,5,5"/>
                    </StackPanel>
                </GroupBox>

                <!-- Lock Screen Settings -->
                <GroupBox Header="ðŸ”’ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ ÑÐºÑ€Ð°Ð½Ð° Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸">
                    <StackPanel>
                        <CheckBox x:Name="EnableLockScreenChange" 
                                 Content="Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐºÑ€Ð°Ð½ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ Ñ Ð¾Ð±Ð¾ÑÐ¼Ð¸ Ñ€Ð°Ð±Ð¾Ñ‡ÐµÐ³Ð¾ ÑÑ‚Ð¾Ð»Ð°"
                                 Margin="5"/>
                        
                        <Separator Margin="5,10"/>
                        
                        <CheckBox x:Name="EnableProgramBasedLockScreen" 
                                 Content="ÐœÐµÐ½ÑÑ‚ÑŒ ÑÐºÑ€Ð°Ð½ Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²ÐºÐ¸ Ð² Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¾Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹"
                                 Margin="5"
                                 Checked="EnableProgramBasedLockScreen_Checked"
                                 Unchecked="EnableProgramBasedLockScreen_Unchecked"/>
                        
                        <StackPanel x:Name="ProgramMappingPanel" 
                                   Visibility="Collapsed" 
                                   Margin="5,10,5,5">
                            <TextBlock Text="ÐŸÑ€Ð¸Ð²ÑÐ·ÐºÐ¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼ Ðº Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑÐ¼:" 
                                      FontWeight="Bold" 
                                      Margin="0,0,0,5"/>
                            
                            <Border BorderBrush="#CCCCCC" 
                                   BorderThickness="1" 
                                   CornerRadius="3"
                                   Padding="5">
                                <StackPanel>
                                    <ListView x:Name="ProgramMappingsListView" 
                                             Height="150"
                                             Margin="0,0,0,5">
                                        <ListView.View>
                                            <GridView>
                                                <GridViewColumn Header="ÐŸÑ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð°" Width="200" DisplayMemberBinding="{Binding ProgramName}"/>
                                                <GridViewColumn Header="ÐŸÑƒÑ‚ÑŒ Ðº Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸ÑŽ" Width="350" DisplayMemberBinding="{Binding ImagePath}"/>
                                            </GridView>
                                        </ListView.View>
                                    </ListView>
                                    
                                    <Grid Margin="0,5,0,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <TextBox x:Name="ProgramNameTextBox" 
                                                Grid.Column="0"
                                                Padding="8"
                                                Margin="0,0,5,0"
                                                ToolTip="Ð˜Ð¼Ñ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñ‹ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: chrome.exe)"/>
                                        
                                        <TextBox x:Name="ProgramImagePathTextBox" 
                                                Grid.Column="1"
                                                Padding="8"
                                                Margin="0,0,5,0"
                                                IsReadOnly="True"/>
                                        
                                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                                            <Button Content="ðŸ“‚" 
                                                   Width="35"
                                                   Click="BrowseProgramImageButton_Click"
                                                   ToolTip="Ð’Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ"/>
                                            <Button Content="âž•" 
                                                   Width="35"
                                                   Click="AddProgramMappingButton_Click"
                                                   ToolTip="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð²ÑÐ·ÐºÑƒ"/>
                                            <Button Content="âž–" 
                                                   Width="35"
                                                   Background="#D13438"
                                                   Click="RemoveProgramMappingButton_Click"
                                                   ToolTip="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð²ÑÐ·ÐºÑƒ"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </StackPanel>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- Control Buttons -->
        <Border Grid.Row="2" 
               BorderBrush="#CCCCCC" 
               BorderThickness="0,1,0,0" 
               Padding="0,10,0,0"
               Margin="0,10,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Button x:Name="StartButton" 
                           Content="â–¶ï¸ Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ"
                           Width="120"
                           Click="StartButton_Click"/>
                    <Button x:Name="StopButton" 
                           Content="â¸ï¸ ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"
                           Width="120"
                           IsEnabled="False"
                           Click="StopButton_Click"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="ðŸ”„ Ð¡Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÑÐµÐ¹Ñ‡Ð°Ñ"
                           Width="140"
                           Click="ChangeNowButton_Click"/>
                    <Button Content="âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸"
                           Width="120"
                           Click="SettingsButton_Click"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
